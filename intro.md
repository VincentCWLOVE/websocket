# WebSocket

### 引入

在我们日常开发中，我们经常会碰到这样的需求：服务器端与客户端需要持续交换数据，比如 `IM`(即时通讯)。

在 `IM`中，很多网站为了实现推送技术，所用的技术都是轮询。轮询是在特定的的时间间隔（如每1秒），由浏览器对服务器发出HTTP请求，然后由服务器返回最新的数据给客户端的浏览器。这种传统的模式带来很明显的缺点，即浏览器需要不断的向服务器发出请求，然而HTTP请求可能包含较长的头部，其中真正有效的数据可能只是很小的一部分，显然这样会浪费很多的带宽等资源。

前端开发者，都知道浏览器基本上是使用`HTTP`,然而`HTTP`协议是一种无状态协议，服务器端本身不具有识别客户端的能力，必须借助外部机制，比如`session`和`cookie`，才能与特定客户端保持对话。如果我要持续对话，显然使用`session`和`cookie`，并不是一种很好的解决方案。为了解决这个问题，HTML5提出了浏览器的`WebSocket`

### 什么是`WebSocket`

`WebSocket`是一种在单个 `TCP` 连接上进行全双工通讯的协议。`WebSocket`通信协议于2011年被`IETF`定为标准`RFC 6455`，并被`RFC7936`所补充规范。`WebSocket API`也被`W3C`定为标准。

`WebSocket` 使得客户端和服务器之间的数据交换变得更加简单，允许服务端主动向客户端推送数据。在 `WebSocket API` 中，浏览器和服务器只需要完成一次握手，两者之间就直接可以创建持久性的连接，并进行双向数据传输。

<p style="text-align:right">摘自《维基百科》</p>

我们可以看出,`WebSocket`与`HTTP`一样，也是一种协议，专门用于解决 `Web`和 `server`的长链接的协议。
